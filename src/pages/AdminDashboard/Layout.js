import React, { useEffect, useState } from "react";
import { useLocation } from "react-router-dom";

import AdminLeftSidebar from "../../components/admin/AdminLeftSidebar";
import AdminNavbar from "../../components/admin/AdminNavbar";

const Layout = ({ children, hideSideBar }) => {
  const { pathname } = useLocation();
  const [topColor, setTopColor] = useState(false);

  useEffect(() => {
    if (
      pathname.startsWith("/admin/dashboard/investors/") ||
      pathname.startsWith("/admin/dashboard/master-wallet")
    ) {
      setTopColor(true);
    }
  }, [pathname]);

  return (
    <div className="min-h-screen mx-auto" style={{ maxWidth: "1536px" }}>
      <div className="flex">
        <div className={`${hideSideBar ? "hidden" : ""}`}>
          <AdminLeftSidebar />
        </div>

        <div
          className={`w-full overflow-hidden ${topColor ? "" : "px-3 lg:px-8"}`}
        >
          {!pathname.startsWith("/admin/dashboard/project/edit") &&
            !pathname.startsWith("/admin/dashboard/whitelisting") && (
              <div
                className={`${topColor ? "px-3 lg:px-8 bg-lightSmoke" : ""}`}
              >
                <AdminNavbar />
              </div>
            )}
          <div className={`${topColor ? "" : ""}`}>{children}</div>
        </div>
      </div>
    </div>
  );
};

export default Layout;
