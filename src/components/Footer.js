import React, { useState } from "react";
import { Link } from "react-router-dom";
import { toast } from "react-toastify";

import { FooterData } from "../Data/globalData";
import { FooterLeftBg, FooterRightBg } from "../utilities/svg";
import { PrimaryButton, scrollToTop } from "./generalComponents";

const Footer = () => {
  const { Logo, desc, headings } = FooterData.global;

  return (
    <div className="relative">
      <div className="bg-white text-grey2 pageWidth container py-14 md:py-20 xl:py-32 relative z-10">
        <Link to="/" onClick={() => scrollToTop()}>
          <Logo />
        </Link>

        <div className="grid grid-cols-2 lg:grid-cols-footer gap-y-5 gap-x-10 lg:gap-3 2xl:gap-20 mt-6 xl:mt-8">
          <p className="font-normal leading-6 normalText col-start-1 col-end-3 md:col-end-auto border-b border-grey5 md:border-none pb-5 md:pb-0">
            {desc}
          </p>

          {headings.map(({ name, subLinks }, index) => (
            <div
              className="md:flex items-center flex-col row-start-3 md:row-start-2 lg:row-start-auto mt-4 500px:mt-0"
              key={index}
            >
              <div>
                <h6 className="text-dark1 font-semibold headerText mb-2">
                  {name}
                </h6>
                {subLinks.map(({ name, link }, index) => (
                  <Link
                    key={index}
                    className="font-normal normalText block mt-2 500px:mt-3 primaryHover"
                    to={link}
                    onClick={() => scrollToTop()}
                  >
                    {name}
                  </Link>
                ))}
              </div>
            </div>
          ))}

          {/* News letter form */}
          <NewsLetterForm />
        </div>
      </div>

      <BottomFooter />

      <FooterLeftBg className="absolute top-0" />
      <FooterRightBg className="absolute top-0 right-0" />
    </div>
  );
};

export default Footer;

const BottomFooter = () => {
  const { text, socialMedias } = FooterData.BottomData;

  return (
    <div className="bg-grey6 py-6">
      <div className="pageWidth flexCenter flex-col-reverse sm:flex-row sm:flexBetween text-center sm:text-left">
        <p className="text-dark1 font-medium text-xs 500px:text-base sm:text-lg mt-4 sm:mt-0">
          {text}
        </p>

        <div className="flexCenter gap-10">
          {socialMedias.map(({ link, Icon }, index) => (
            <a
              target="_blank"
              rel="noreferrer"
              key={index}
              href={link}
              className="text-grey1 primaryHover"
            >
              <Icon className="fill-current w-3/4 500px:w-auto" />
            </a>
          ))}
        </div>
      </div>
    </div>
  );
};

const NewsLetterForm = () => {
  const { name, Icon, placeHolder, btnText } = FooterData.global.newsLetter;
  const [mail, setMail] = useState("");

  const subscribeNewsLetter = (e) => {
    e.preventDefault();
    toast.info("Successfully subscribed to newsletter");
  };

  return (
    <form
      onSubmit={(e) => subscribeNewsLetter(e)}
      className="row-start-2 md:row-start-auto col-start-1 col-end-3 md:col-start-auto md:col-end-auto mt-2 500px:mt-0"
    >
      <h6 className="text-dark1 font-semibold headerText text-center 500px:text-left mb-5">
        {name}
      </h6>

      <div
        className="flexBetween gap-2 p-1 pl-3 rounded-7px border-3px border-grey8"
        style={{
          background: "linear-gradient(180deg, #F8F8F8 0%, #FFFFFF 100%)",
        }}
      >
        <Icon />
        <input
          name="subscription_email"
          className="bg-transparent border-none outline-none flex-1 w-full py-1 500px:py-0"
          type="email"
          placeholder={placeHolder}
          required={true}
          value={mail}
          onChange={(e) => setMail(e.target.value)}
        />
        <PrimaryButton classNames="bg-primaryDark rounded-7px hidden 500px:flex">
          {btnText}
        </PrimaryButton>
      </div>

      <PrimaryButton classNames="bg-primaryDark rounded-7px w-full mt-4 py-3 rounded-9px flex 500px:hidden">
        {btnText}
      </PrimaryButton>
    </form>
  );
};
