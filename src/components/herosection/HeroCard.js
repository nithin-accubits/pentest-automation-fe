import React, { useState } from "react";

import { zmtPurchaseOptions } from "../../Data/Home";
import { DownArrow } from "../../utilities/svg";
import { GreyButton, OutsideClickCloseContainer } from "../generalComponents";

const HeroCard = ({
  cardImage,
  title,
  description,
  buttonText,
  buttonfunction,
  dropdownType,
}) => {
  const [showZmtOptions, setShowZmtOptions] = useState(false);

  return (
    <div className="w-full md:w-1/3 px-2 mb-4">
      <div
        className="bg-white rounded-13px h-full py-8 px-2 500px:px-16 flex items-center justify-center flex-row md:flex-col xl:flex-row gap-2 500px:gap-10 bg-cover bg-[url('/src/assets/herosection/cardsidedesign.svg')] md:p-8"
        style={{ boxShadow: "0px -3px 35px rgba(0, 0, 0, 0.05)" }}
      >
        <div className="flex items-center justify-center">
          {cardImage && (
            <img
              src={cardImage}
              alt="cardImage"
              className="h-20 w-20 bg-cover min-h-80px min-w-80px md:min-h-110px md:min-w-109px"
            />
          )}
        </div>
        <div className="flex flex-col items-left px-2">
          {title && (
            <h3 className="text-grey1 text-xl md:text-28px font-bold mb-3 w-5/6 500px:w-1/2 md:w-auto">
              {title}
            </h3>
          )}
          {description && (
            <p className="font-normal text-grey2 text-base pb-3 w-3/4 md:w-auto">
              {description}
            </p>
          )}
          {dropdownType ? (
            <div className="relative text-light3">
              {buttonText && (
                <OutsideClickCloseContainer setState={setShowZmtOptions}>
                  <GreyButton
                    onClick={() => {
                      setShowZmtOptions(!showZmtOptions);
                    }}
                    classNames="gap-0 sm:gap-5"
                    style={{ overflow: "visible" }}
                  >
                    <span className="text-primary">{buttonText}</span>
                    <DownArrow className="ml-3 fill-current" />
                  </GreyButton>

                  {showZmtOptions && (
                    <Zmtdropdown setState={setShowZmtOptions} />
                  )}
                </OutsideClickCloseContainer>
              )}
            </div>
          ) : (
            <>
              {buttonText ? (
                <button
                  style={{ width: "fit-content" }}
                  className="bg-light4 inline-block mt-auto rounded-9px px-5 py-2 font-semibold text-primary hover:shadow-btn transition-all duration-300 ease-in-out"
                  onClick={buttonfunction ? () => buttonfunction() : () => {}}
                >
                  {buttonText}
                </button>
              ) : (
                ""
              )}
            </>
          )}
        </div>
      </div>
    </div>
  );
};

export default HeroCard;

export const Zmtdropdown = ({ setState }) => {
  return (
    <div className="absolute top-10 min-w-full animate-visible2">
      <div className="relative z-10 shadow-dropdown bg-white p-2 rounded-7px flex flex-col gap-1 sm:gap-2">
        {zmtPurchaseOptions.map(({ name, Logo, redirectionUrl }, index) => (
          <a
            key={index}
            href={redirectionUrl}
            target="_blank"
            rel="noopener noreferrer"
            onClick={() => setState(false)}
            className="px-3 py-2 flex items-center gap-3 transition2 cursor-pointer rounded-5px text-grey1 normalText font-medium hover:bg-grey5 hover:font-semibold"
          >
            {Logo && <Logo style={{ maxWidth: "28px", maxHeight: "28px" }} />}
            <span>{name}</span>
          </a>
        ))}
      </div>
    </div>
  );
};
